"use strict";
(function(e){var t=false;e(".is-half").click(function(){var t=e(this);e(".is-half").each(function(){var n=e(this);if(t[0]!=n[0]){n.removeClass("btn-primary");n.addClass("btn-default")}else{n.addClass("btn-primary");n.removeClass("btn-default")}})});var n=function(t){return function(r,i){var s,o;s=[];o=new RegExp(r,"i");e.each(t,function(e,t){if(o.test(t)){s.push({value:t})}});i(s)}};e(".box.name").typeahead(null,{name:"nickname",displayKey:"value",source:n(nickname)});e("#form-data").submit(function(n){if(t)return false;t=true;n.preventDefault();var r=e(this);var i=new Array;var s=0;for(var o=0;o<4;o++){var u=e("#tableBody input.point").eq(o);i[o]=new Object;i[o]["name"]=e("#tableBody input.name:not([readonly])").eq(o).val();if(i[o]["name"]==""){t=false;alert("이름이 비어있습니다.");return false}var a=u.val();if(typeof a=="string"){a=parseInt(a)}i[o]["point"]=a;s+=a}if(s!=0){alert("합이 0이 아닙니다.["+s+"점 오차]");t=false;return false}var f=JSON.stringify(i);e.post("./submit.php",{isHalf:e(".is-half.btn-primary").attr("data-value"),data:f}).done(function(n){if(n["message"]=="success"){alert("업로드되었습니다.");e("input[type=text]").val("")}else{alert(n["reason"])}t=false}).fail(function(e){alert("알 수 없는 에러가 발생하였습니다.");t=false});return false});e(".box.point").keyup(function(t){var n=e(this).val();var r=n.replace(/[^0-9\-]/gi,"");if(r!=n)e(this).val(r);if(e.inArray(t.keyCode,[0,46,8,9,27,13,110,190,189])!==-1||t.keyCode==65&&t.ctrlKey===true||t.keyCode>=35&&t.keyCode<=39){return}if((t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)){t.preventDefault()}});e(".box.point").focusout(function(){var t=null;var n=true;var r=0;e(".box.point").each(function(){var i=e(this);if(i.val().length==0&&t==null){t=e(this);return true}else if(i.val().length==0){n=false;return false}r+=parseInt(i.val())});if(n&&t){t.val(-1*r)}})})(jQuery)